!! –°–≥–µ–Ω–µ—Ä–∏–ª —Å –¥–∏–ø—Å–∏–∫–æ–º + –º–æ–∏ –∫–æ–º–º–µ–Ω—Ç—ã –ø—Ä–æ —Ç–æ, –∫–∞–∫ –∏ —á—Ç–æ —Ç—É—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ - MVC - —É–¥–æ–±–Ω–∞—è –∏ –ø—Ä–æ—Å—Ç–∞—è.
https://ru.wikipedia.org/wiki/Model-View-Controller

### –ú–æ–¥–µ–ª—å (Model)
**–Ø–¥—Ä–æ –∏–≥—Ä–æ–≤–æ–π –ª–æ–≥–∏–∫–∏**, –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–µ –æ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:
- `GameMap` ‚Äì —Ö—Ä–∞–Ω–∏—Ç –¥–≤—É–º–µ—Ä–Ω—ã–π –º–∞—Å—Å–∏–≤ –∫–ª–µ—Ç–æ–∫ (`Cell[][]`) –∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç:
  - –ì–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –∫–∞—Ä—Ç—ã (—Ä–µ–ª—å–µ—Ñ, —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤)
  - –ü–æ–∏—Å–∫–æ–º –ø—É—Ç–µ–π, —é–Ω–∏—Ç–æ–≤, –∑–∞–º–∫–æ–≤ –∏ –≤—Å–µ–≥–æ, —á—Ç–æ –Ω–∞ –∫–∞—Ä—Ç–µ
  - –ö–æ–ª–ª–∏–∑–∏—è–º–∏ (–ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∑–∞–Ω—è—Ç–æ—Å—Ç—å –∫–ª–µ—Ç–æ–∫)

- `Unit` –∏ –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∏ (`Hero`, `Swordsman` –∏ –¥—Ä.):
  - —Ö—Ä–∞–Ω—è—Ç –∫—É—á—É –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –Ω–æ –ø–æ —Ñ–∞–∫—Ç—É –Ω–µ—Ç —Å–æ–≤–µ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è, —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∏–∑ –≤–Ω–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º–∏.—ç

  Cell - –∫–ª–µ—Ç–∫–∞ –ø–æ–ª—è, –º–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å —é–Ω–∏—Ç–∞, —Ç–∏–ø –º–µ—Å—Ç–Ω–æ—Å—Ç–∏, –∑–∞–º–æ–∫ –∏ —Ç–¥. –ò–∑ –∫–ª–µ—Ç–∫–∏ –≤ –∫–ª–µ—Ç–∫—É –º–æ–∂–Ω–æ –ø–µ—Ä–µ–ª–æ–∂–∏—Ç—å —é–Ω–∏—Ç–æ–≤ –∏ –ø—Ä–æ—á.
  –∏–º–µ–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã.

- `Building` –∏ –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∏:
       —Ç—É—Ç –ø–æ–Ω—è—Ç–Ω–æ
  - `Castle` ‚Äì –æ—Å–Ω–æ–≤–Ω–æ–π –æ–±—ä–µ–∫—Ç –∏–≥—Ä–æ–∫–∞/–±–æ—Ç–∞
  - `Barracks` ‚Äì –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ —é–Ω–∏—Ç–æ–≤
  - `Sanctuary` ‚Äì –Ω–∞ –∑–∞—â–∏—Ç—É


### –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (Controller)
**–ü–æ—Å—Ä–µ–¥–Ω–∏–∫ –º–µ–∂–¥—É –ú–æ–¥–µ–ª—å—é –∏ View**, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è:

- `GameController` ‚Äì –≥–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª –∏–≥—Ä—ã, –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ö–æ–¥–æ–≤

- `UnitMovementController` ‚Äì –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Å —É—á—ë—Ç–æ–º:
  - –®—Ç—Ä–∞—Ñ–æ–≤ –∑–∞ –º–µ—Å—Ç–Ω–æ—Å—Ç—å (`terrainPenalties`)
  - –û—á–∫–æ–≤ –¥–≤–∏–∂–µ–Ω–∏—è (`moveRange`)
  // –≤—Å–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è —é–Ω–∏—Ç–æ–≤ —á–µ—Ä–µ–∑ –Ω–µ–≥–æ - –ø–æ —Ñ–∞–∫—Ç—É –º–µ–Ω—è–µ—Ç —Ç–æ, –≤ –∫–∞–∫–æ–π –∫–ª–µ—Ç–∫–µ –ª–µ–∂–∏—Ç —é–Ω–∏—Ç


- `BattleController` ‚Äì –±–æ–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞:
  - –†–∞—Å—á—ë—Ç —É—Ä–æ–Ω–∞ —Å –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞–º–∏
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–ª—å–Ω–æ—Å—Ç–∏ –∞—Ç–∞–∫–∏
  –∞—Ç–∞–∫—É–µ–º –º—ã –∫—Å—Ç–∞—Ç–∏ —Ç–æ–ª—å–∫–æ –Ω–∞ 1 –∫–ª–µ—Ç—É, —Ç.–µ —Å–Ω–∞—á–∞–ª–∞ –Ω–∞–¥–æ –ø–æ–¥–æ–π—Ç–∏

  // –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –º–æ–∂–Ω–æ –ª–∏ –∞—Ç–∞–∫–æ–≤–∞—Ç—å –∏ —É–±–∞–≤–ª—è–µ—Ç —Ö–ø —É —Ü–µ–ª–∏
  –∫–∞—é—Å—å, –Ω–∞–ø–∏—Å–∞–ª –Ω–µ–º–Ω–æ–≥–æ ui —Ç–∞–º, –Ω–µ –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ, –Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∂–µ


- `Buying controller` ‚Äì —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏:
  - –ü–æ–∫—É–ø–∫–∞ —é–Ω–∏—Ç–æ–≤/–∑–¥–∞–Ω–∏–π
  - –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –∑–æ–ª–æ—Ç–∞ –∑–∞ —Ö–æ–¥

–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –±–æ—Ç–∞ +- –Ω–æ—Ä–º –∑–∞–∫–æ–º–µ–Ω—á–µ–Ω –≤ –∫–æ–¥–µ


### –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ (View)

!!–í–∞–∂–Ω–æ
—Ñ–∏—à–∫–∞ –≤ —Ç–æ–º, —á—Ç–æ —ç—Ç–æ—Ç —Å–ª–æ–π –ø—Ä–æ—Å—Ç–æ –æ—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–ª–æ—è model, –ø–æ—ç—Ç–æ–º—É –æ–Ω –Ω–∏–∫–∞–∫ –Ω–µ –∑–∞–¥–∞–π—Å—Ç–≤–æ–≤–∞–Ω –≤ –ª–æ–Ω–∏–∫–µ,
—Ç–æ –µ—Å—Ç—å ui –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–¥–µ–ª–µ–Ω –æ—Ç —Å–ª–æ—è –ª–æ–≥–∏–∫–∏ (–ª–æ–Ω–≥–∏–∫–∞ - –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö)

**–û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∏ –≤–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö**, —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –Ω–∞:
- `MapRenderer` ‚Äì –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ä—Ç—ã:
    –≤ —Ä–µ–Ω–¥–µ—Ä–µ –µ—Å—Ç—å –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è –∑–Ω–∞—á–∫–æ–≤ - –ø–æ –≤–∫—É—Å—É –º–µ–Ω—è–π –∫–∞–∫ —Ö–æ—á–µ—à—å
  - –°–∏–º–≤–æ–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ (—é–Ω–∏—Ç—ã ‚Üí `P`, `E`, –∑–∞–º–∫–∏ ‚Üí `C`, `c`)
  - –¶–≤–µ—Ç–æ–≤—ã–µ –∫–æ–¥—ã ANSI –¥–ª—è —Ç–∏–ø–æ–≤ –º–µ—Å—Ç–Ω–æ—Å—Ç–∏

-–æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–µ–Ω—é—à–∫–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç —Ä—ã—á–∞–≥–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º–∏. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º–∏(—Å–º –∫–∞—Ä—Ç–∏–Ω–∫—É –≤ –≤–∏–∫–∏)


## üîó –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏

1. **–ú–æ–¥–µ–ª—å ‚Üí –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä**:
   –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç –Ω–∞ –≤—Ö–æ–¥ –º–æ–¥–µ–ª—å–∫—É –∏ –¥–µ–ª–∞–µ—Ç —Å –Ω–µ–π –≤—Å—è–∫–æ–µ
   - –ú–æ–¥–µ–ª—å **–Ω–µ –∑–Ω–∞–µ—Ç** –æ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–∏ –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤.


3. **View ‚Üí –ú–æ–¥–µ–ª—å**:
   - –ü–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ **—Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è** –∏–∑ –º–æ–¥–µ–ª–∏


## ‚ôªÔ∏è –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

2. **–ü—Ä–∏–º–µ—Ä —Ö–æ–¥–∞**: //  +- —Ç–∞–∫, –≤–µ—Ä—é –¥–∏–ø—Å–∏–∫—É
   - –ò–≥—Ä–æ–∫ –≤–≤–æ–¥–∏—Ç "–ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å —é–Ω–∏—Ç–∞ –≤ (3,2)"
   - `InputHandler` –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
   - `UnitMovementController` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
     - –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∫–ª–µ—Ç–∫–∏ (`map.isCellFree()`)
     - –°—Ç–æ–∏–º–æ—Å—Ç—å –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è (`moveCost * terrainPenalty`)
   - `GameMap` –æ–±–Ω–æ–≤–ª—è–µ—Ç –ø–æ–∑–∏—Ü–∏—é —é–Ω–∏—Ç–∞
   - `MapRenderer` –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç –∫–∞—Ä—Ç—É

## üì¶ –í–∞–∂–Ω—ã–µ –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏


### 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π
–Æ–Ω–∏—Ç—ã —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ **—Ñ–ª–∞–≥–∏**
//–≤—Å–º—ã—Å–ª–µ —é–Ω–∏—Ç—ã —Ö—Ä–∞–Ω—è—Ç true\false –æ—Ç–Ω–æ—Å—Ç–∏–µ–ª—å–Ω–æ —Ç–æ–≥–æ —Å—Ö–æ–¥–∏–ª –æ–Ω, –∞—Ç–∞–∫–æ–≤–∞–ª –ª–∏ –∏ —Ç–¥

if (!unit.hasMoved && !unit.hasAttacked) {
    // –î–æ—Å—Ç—É–ø–Ω—ã –¥–µ–π—Å—Ç–≤–∏—è
}
```

### 3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç—ã
–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ `GameMap.initialize()`:
- –†–∞–∑–º–µ—â–∞–µ—Ç –∑–∞–º–∫–∏ –∏–≥—Ä–æ–∫–∞ –∏ –±–æ—Ç–∞
- –°–æ–∑–¥–∞–µ—Ç –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è (`Terrain.OBSTACLE`)
- –î–æ–±–∞–≤–ª—è–µ—Ç **—Å–ª—É—á–∞–π–Ω—ã–µ —Å–≤—è—Ç–∏–ª–∏—â–∞** –≤ –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã—Ö –∑–æ–Ω–∞—Ö



